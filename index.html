<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>bebe</title>
  <style>
    :root{
      --accent:#e63946;
      --accent2:#6c5ce7;
      --bg1:#fff0f4;
      --polka1:#ffd6dd;
      --polka2:#ffffff;
      --card-bg: rgba(255,255,255,0.98);
      --ui-radius:16px;
      --shadow: 0 30px 80px rgba(0,0,0,0.14);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background: linear-gradient(180deg,#fff6f8,#fffafc);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      color:#222;
    }

    /* Polkadot background */
    .polka {
      position:fixed; inset:0; z-index:0;
      background-image:
        radial-gradient(circle at 20% 20%, var(--polka1) 0 6px, transparent 7px),
        radial-gradient(circle at 60% 40%, var(--polka2) 0 5px, transparent 6px),
        radial-gradient(circle at 40% 70%, var(--polka1) 0 7px, transparent 8px),
        radial-gradient(circle at 80% 80%, var(--polka2) 0 6px, transparent 7px);
      background-size: 220px 220px;
      opacity:0.95;
      pointer-events:none;
    }

    .wrap{ position:relative; width:min(94vw,980px); margin:24px; z-index:20; display:flex; justify-content:center; align-items:center; }

    .card{
      position:relative;
      width:100%;
      max-width:820px;
      padding:36px;
      border-radius:var(--ui-radius);
      background: var(--card-bg);
      box-shadow: var(--shadow);
      text-align:center;
      overflow:visible;
      z-index:30;
      backdrop-filter: blur(6px);
    }

    header h1{ margin:0 0 10px 0; font-size:clamp(22px,4vw,44px); color:var(--accent); letter-spacing:0.6px; }
    .subtitle{ margin:0 0 18px 0; color:#444; font-size:16px; }

    /* Controls container: keep overflow visible so scaled buttons don't clip */
    .controls{
      position:relative;
      display:flex;
      gap:14px;
      justify-content:center;
      align-items:center;
      margin-top:12px;
      flex-wrap:wrap;
      overflow:visible;
      z-index:35;
    }

    .btn{
      --padY:12px; --padX:28px;
      display:inline-flex; align-items:center; justify-content:center;
      padding:var(--padY) var(--padX);
      border-radius:999px; border:0; cursor:pointer; color:#fff;
      background:var(--accent); font-weight:700; font-size:16px; user-select:none;
      transform-origin:center center;
      transition: transform 700ms cubic-bezier(.2,.9,.2,1), box-shadow 220ms, background 220ms;
      box-shadow: 0 10px 26px rgba(230,57,70,0.18);
      min-width:120px; position:relative; overflow:visible;
      will-change: transform;
    }

    .btn.secondary{ background: linear-gradient(180deg,var(--accent2), #a29bfe); box-shadow: 0 10px 26px rgba(108,92,231,0.18); }

    .btn:active{ transform: translateY(1px) }

    /* Hover pulse */
    .btn:hover{ animation: pulse 1.4s infinite; }
    @keyframes pulse{ 0%{transform:scale(1)} 50%{transform:scale(1.06)} 100%{transform:scale(1)} }

    /* Ripple */
    .ripple{ position:absolute; border-radius:50%; transform:scale(0); background: rgba(255,255,255,0.28); pointer-events:none; }

    .next{ display:none; margin-top:18px; padding:18px; border-radius:12px; background:linear-gradient(180deg, rgba(230,57,70,0.04), rgba(255,255,255,0.02)); color:#333 }

    /* Scene decorations */
    .scene{ position:fixed; inset:0; pointer-events:none; z-index:10; overflow:hidden; }
    .float{ position:absolute; will-change: transform, opacity; opacity:0.95; transform-origin:center; animation: floatUp linear infinite; font-size:22px; text-shadow: 0 2px 6px rgba(0,0,0,0.12); }
    @keyframes floatUp{ 0%{transform: translateY(0) rotate(0deg); opacity:0} 10%{opacity:1} 60%{opacity:1} 100%{transform: translateY(-120vh) rotate(360deg); opacity:0} }

    .star{ position:absolute; width:4px; height:4px; border-radius:50%; background:rgba(255,255,255,0.95); filter:blur(.6px); opacity:.9; animation: twinkle 3s ease-in-out infinite }
    @keyframes twinkle{ 0%{opacity:.2} 50%{opacity:1} 100%{opacity:.2} }

    /* Overlay celebration */
    .overlay{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:80; pointer-events:none; opacity:0; transform:scale(.98); transition: opacity 420ms ease, transform 420ms ease; }
    .overlay.show{ opacity:1; transform:scale(1); pointer-events:auto }
    .celebrate{ text-align:center; color:white; padding:28px; border-radius:16px; backdrop-filter: blur(6px); box-shadow: 0 30px 80px rgba(0,0,0,0.45); }
    .celebrate h2{ margin:0 0 8px 0; font-size:clamp(28px,5vw,56px); text-shadow: 0 6px 30px rgba(230,57,70,0.45); animation: popIn 700ms cubic-bezier(.2,.9,.2,1) }
    @keyframes popIn{ 0%{transform:scale(.6);opacity:0} 60%{transform:scale(1.08);opacity:1} 100%{transform:scale(1)} }

    canvas#confetti{ position:fixed; inset:0; z-index:75; pointer-events:none }

    @media (max-width:520px){
      .btn{ min-width:96px; font-size:15px; --padX:18px }
      .card{ padding:20px }
      header h1{ font-size:22px }
    }
  </style>
</head>
<body>
  <div class="polka" aria-hidden="true"></div>
  <div class="scene" id="scene" aria-hidden="true"></div>

  <div class="wrap">
    <main class="card" role="main" aria-labelledby="title">
      <header>
        <h1 id="title" aria-live="polite">üê∂ haaaaaaaaaai sayaaangg hehshehehe</h1>
        <p class="subtitle">are you wifi? cuz im feeling the connection. jadi... seeengg, will you be my valentine? WUAKAKAKAKAKKA</p>
      </header>

      <div class="controls" id="controls">
        <button class="btn" id="yesBtn" aria-label="Yes">Yes</button>
        <button class="btn secondary" id="noBtn" aria-label="No">No</button>
      </div>

      <div class="next" id="next">
        <h2 style="margin:0 0 8px 0">üíñüê∂üêïYEYEYEYEYEYYYY</h2>
        <p style="margin:0;color:#444">KAMU MUK YAH GAGGAK TERPAKSA KANKANKANKANKAN? love u sayaaangg</p>
      </div>
    </main>
  </div>

  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="celebrate" id="celebrate">
      <h2 id="celebrateTitle">ü§çüíìHEHEHYAAAYY</h2>
      <p id="celebrateText">AIRENKGAMNA</p>
    </div>
  </div>

  <canvas id="confetti"></canvas>

  <script>
    // Elements
    const yesBtn = document.getElementById('yesBtn');
    const noBtn  = document.getElementById('noBtn');
    const controls = document.getElementById('controls');
    const next = document.getElementById('next');
    const scene = document.getElementById('scene');
    const overlay = document.getElementById('overlay');
    const confettiCanvas = document.getElementById('confetti');
    const ctx = confettiCanvas.getContext('2d');

    // cumulative state
    let yesScale = 1;
    let noScale  = 1;

    // parameters
    const STEP_MULTIPLIER = 1.35; // setiap klik No, Yes dikali ini
    const STEP_REDUCER    = 0.78; // setiap klik No, No dikali ini
    const MAX_YES_SCALE   = 24;   // batas atas
    const MIN_NO_SCALE    = 0.06; // batas bawah agar No tetap bisa diklik
    const TRANS_MS        = 700;  // durasi transisi (ms)

    // canvas resize
    function resizeCanvas(){ confettiCanvas.width = innerWidth; confettiCanvas.height = innerHeight; }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    // spawn floating decorations (dogs & hearts)
    function spawnFloating(type, left, delay, size, color){
      const el = document.createElement('div');
      el.className = 'float';
      el.style.left = left + 'px';
      el.style.bottom = '-40px';
      el.style.fontSize = (size || 22) + 'px';
      el.style.animationDuration = (5 + Math.random()*6) + 's';
      el.style.animationDelay = (delay || 0) + 's';
      el.style.opacity = 0;
      el.style.zIndex = 8;
      if(type === 'dog'){ el.textContent = 'üê∂'; el.style.fontSize = (size || 28) + 'px'; }
      else if(type === 'heart-red'){ el.textContent = '‚ù§'; el.style.color = '#ff2d55'; }
      else if(type === 'heart-white'){ el.textContent = '‚ù§'; el.style.color = '#ffffff'; }
      else { el.textContent = '‚ú®'; el.style.color = color || '#ffd166'; }
      scene.appendChild(el);
      setTimeout(()=> el.remove(), (parseFloat(el.style.animationDuration)*1000) + ((parseFloat(el.style.animationDelay)||0)*1000) + 300);
    }

    function populateScene(){
      const w = window.innerWidth;
      for(let i=0;i<28;i++) spawnFloating('dog', Math.random()*w, Math.random()*3, 18 + Math.random()*36);
      for(let i=0;i<18;i++) spawnFloating('heart-red', Math.random()*w, Math.random()*3, 14 + Math.random()*22);
      for(let i=0;i<12;i++) spawnFloating('heart-white', Math.random()*w, Math.random()*3, 12 + Math.random()*18);
    }
    populateScene();
    setInterval(populateScene, 8000);

    // ripple helper
    function createRipple(e, btn){
      const rect = btn.getBoundingClientRect();
      const r = Math.max(rect.width, rect.height);
      const ripple = document.createElement('div');
      ripple.className = 'ripple';
      ripple.style.width = ripple.style.height = r*2 + 'px';
      ripple.style.left = (e.clientX - rect.left - r) + 'px';
      ripple.style.top  = (e.clientY - rect.top - r) + 'px';
      ripple.style.opacity = '0.28';
      btn.appendChild(ripple);
      ripple.animate([{ transform: 'scale(0)', opacity:0.28 }, { transform:'scale(1)', opacity:0 }], { duration: 600, easing:'cubic-bezier(.2,.9,.2,1)' });
      setTimeout(()=> ripple.remove(), 700);
    }

    // NO click: cumulative stepwise scaling (both buttons change)
    noBtn.addEventListener('click', (e) => {
      createRipple(e, noBtn);

      // update cumulative scales
      yesScale = Math.min(MAX_YES_SCALE, yesScale * STEP_MULTIPLIER);
      noScale  = Math.max(MIN_NO_SCALE, noScale * STEP_REDUCER);

      // apply smooth transform only (does not affect layout)
      yesBtn.style.transition = `transform ${TRANS_MS}ms cubic-bezier(.2,.9,.2,1), box-shadow 220ms`;
      noBtn.style.transition  = `transform ${TRANS_MS}ms cubic-bezier(.2,.9,.2,1), box-shadow 220ms`;

      // set transform; transform-origin center ensures growth doesn't shift layout
      yesBtn.style.transform = `scale(${yesScale})`;
      noBtn.style.transform  = `scale(${noScale})`;

      // visual emphasis
      yesBtn.style.boxShadow = '0 40px 90px rgba(230,57,70,0.22)';
      noBtn.style.boxShadow  = '0 6px 14px rgba(0,0,0,0.08)';

      // after transition, keep transforms (cumulative) and restore shadows
      setTimeout(()=> {
        yesBtn.style.boxShadow = '0 10px 26px rgba(230,57,70,0.18)';
        noBtn.style.boxShadow  = '0 10px 26px rgba(108,92,231,0.12)';
        // ensure both buttons remain clickable even if scaled:
        yesBtn.style.zIndex = 100; // keep yes on top so clicks register
        noBtn.style.zIndex  = 90;
        yesBtn.style.pointerEvents = 'auto';
        noBtn.style.pointerEvents  = 'auto';
      }, TRANS_MS + 10);
    });

    // Confetti (canvas) and SVG hearts for celebration
    const confettiPieces = [];
    function burstConfetti(count){
      for(let i=0;i<count;i++){
        confettiPieces.push({
          x: innerWidth/2 + (Math.random()*600 - 300),
          y: innerHeight/2 + (Math.random()*200 - 100),
          vx: (Math.random()*8 - 4),
          vy: (Math.random()*-12 - 4),
          rot: Math.random()*360,
          vr: (Math.random()*12 - 6),
          w: 6 + Math.random()*12,
          h: 8 + Math.random()*12,
          color: ['#ff2d55','#ffffff','#ffd166','#ff6b6b'][Math.floor(Math.random()*4)],
          life: 2000 + Math.random()*1200,
          born: performance.now()
        });
      }
      if(!confettiRunning) runConfetti();
    }
    let confettiRunning = false;
    function runConfetti(){
      confettiRunning = true;
      let last = performance.now();
      function frame(now){
        const dt = now - last;
        last = now;
        ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
        for(let i=confettiPieces.length-1;i>=0;i--){
          const p = confettiPieces[i];
          const t = now - p.born;
          if(t > p.life){ confettiPieces.splice(i,1); continue; }
          p.vy += 0.25;
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.vr * dt/16;
          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot * Math.PI/180);
          ctx.fillStyle = p.color;
          ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
          ctx.restore();
        }
        if(confettiPieces.length) requestAnimationFrame(frame);
        else confettiRunning = false;
      }
      requestAnimationFrame(frame);
    }

    function burstSVGHearts(count){
      for(let i=0;i<count;i++){
        const el = document.createElement('div');
        el.style.position = 'fixed';
        el.style.left = (innerWidth/2 + (Math.random()*400 - 200)) + 'px';
        el.style.top  = (innerHeight/2 + (Math.random()*200 - 100)) + 'px';
        el.style.zIndex = 78;
        el.style.pointerEvents = 'none';
        el.innerHTML = `<svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 21s-7-4.35-9-7.5C-0.5 8.5 5 3 8.5 6.5 10 8 12 10 12 10s2-2 3.5-3.5C19 3 24.5 8.5 21 13.5 19 16.65 12 21 12 21z" fill="${Math.random()<0.5? '#ff2d55' : '#ffffff'}"/>
        </svg>`;
        document.body.appendChild(el);
        const dx = (Math.random()*800 - 400);
        const dy = (Math.random()*-600 - 200);
        el.animate([
          { transform: 'translate(0,0) scale(0.6)', opacity:1 },
          { transform: `translate(${dx}px,${dy}px) scale(1.2)`, opacity:0 }
        ], { duration: 1200 + Math.random()*600, easing: 'cubic-bezier(.2,.9,.2,1)' });
        setTimeout(()=> el.remove(), 2000);
      }
    }

    // simple pop sound
    let audioCtx;
    function playPopSound(){
      try{
        if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const o = audioCtx.createOscillator();
        const g = audioCtx.createGain();
        o.type = 'sine';
        o.frequency.setValueAtTime(520 + Math.random()*120, audioCtx.currentTime);
        g.gain.setValueAtTime(0.0001, audioCtx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.12, audioCtx.currentTime + 0.01);
        g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.45);
        o.connect(g); g.connect(audioCtx.destination);
        o.start();
        o.stop(audioCtx.currentTime + 0.5);
      }catch(e){}
    }

    // YES click: celebration and proceed (works even if Yes is large)
    yesBtn.addEventListener('click', (e) => {
      createRipple(e, yesBtn);
      overlay.classList.add('show');
      overlay.setAttribute('aria-hidden','false');
      playPopSound();
      burstConfetti(90);
      burstSVGHearts(22);
      for(let i=0;i<50;i++){
        const left = Math.random()*window.innerWidth;
        const size = 10 + Math.random()*28;
        spawnFloating(Math.random()<0.6 ? 'heart-red' : 'dog', left, Math.random()*0.6, size);
      }
      setTimeout(()=> {
        overlay.classList.remove('show');
        overlay.setAttribute('aria-hidden','true');
        controls.style.display = 'none';
        next.style.display = 'block';
      }, 1400);
    });

    // keyboard accessibility
    yesBtn.addEventListener('keydown', (e)=> { if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); yesBtn.click(); }});
    noBtn.addEventListener('keydown', (e)=> { if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); noBtn.click(); }});

    // keep scene light on resize
    window.addEventListener('resize', ()=> {
      const kids = Array.from(scene.children);
      if(kids.length > 220) kids.slice(0, kids.length - 140).forEach(k=>k.remove());
      resizeCanvas();
    });

    // initial spawn to make page ramai
    (function initialSpawn(){
      const w = innerWidth;
      for(let i=0;i<40;i++){
        const left = Math.random()*w;
        const t = Math.random();
        if(t < 0.6) spawnFloating('dog', left, Math.random()*2, 18 + Math.random()*36);
        else if(t < 0.85) spawnFloating('heart-red', left, Math.random()*2, 14 + Math.random()*22);
        else spawnFloating('heart-white', left, Math.random()*2, 12 + Math.random()*18);
      }
    })();
  </script>
</body>
</html>